"use strict";angular.module("jdesignerToSbmllayoutApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.ace","ui.bootstrap","vk.beautify"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("jdesignerToSbmllayoutApp").controller("MainCtrl",["$scope","$http","vkBeautify","sbmlLayoutTemplate","jdesignerToSbmlLayout","$window",function(a,b,c,d,e,f){function g(){a.x2js=new X2JS,b.get("jdesigner.json").success(function(b){a.jdesignerString=angular.toJson(b,2)})}a.$window=f,g(),a.$watch("jdesignerString",function(b){b&&(a.jdesigner=angular.fromJson(a.jdesignerString),a.sbmlLayout=e.convert(a.jdesigner),a.sbmlLayoutJsonString=angular.toJson(a.sbmlLayout,2),a.sbmlLayoutXmlString=c.xml(a.x2js.json2xml_str(a.sbmlLayout)))})}]),angular.module("jdesignerToSbmllayoutApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("jdesignerToSbmllayoutApp").factory("sbmlLayoutTemplate",function(){var a={listOfLayouts:{layout:{_id:"JDesigner2SBMLLayout",_xlmns:"http://projects.eml.org/bcb/sbml/level2",annotation:{listOfRenderInformation:{renderInformation:{_id:"JDesignerToSbmlLayoutRender",listOfColorDefinitions:{colorDefinition:[]},listOfGradientDefinitions:{gradientDefinition:[]},listOfLineEndings:{lineEnding:[]},listOfStyles:{style:[]}}},listOfRenderStyles:{renderStyle:{_id:null,fillStyle:{_type:"",_start:""},listOfGroups:{},listOfReactionStyles:{reactionStyle:[]},listOfSpeciesStyles:{speciesStyle:[]},listOfTextStyles:{textStyle:[]}}}},dimensions:{_height:"",_width:""},listOfReactionGlyphs:{reactionGlyph:[]},listOfSpeciesGlyphs:{speciesGlyph:[]},listOfTextGlyphs:{textGlyph:[]}}}};return{getTemplate:function(){return angular.copy(a)}}}),angular.module("jdesignerToSbmllayoutApp").factory("jdesignerToSbmlLayout",["sbmlLayoutTemplate",function(a){function b(a,b){_.each(a.JDesignerFormat.listOfSpecies,function(a){b.listOfLayouts.layout.listOfSpeciesGlyphs.speciesGlyph.push({_id:"sGlyph"+a.id,_species:a.id,boundingBox:{dimensions:{_height:a.complex.h,_width:a.complex.w},position:{_x:a.position.x,_y:a.position.y}}}),b.listOfLayouts.layout.annotation.listOfRenderStyles.renderStyle.listOfSpeciesStyles.speciesStyle.push({_id:"sStyle"+a.id,_reference:"sGlyph"+a.id,listOfShapes:{shape:{_kind:a.complex.subunit.shape,boundingBox:{dimensions:{_height:a.complex.h,_width:a.complex.w},position:{_x:a.position.x,_y:a.position.y}},edgeStyle:{_color:a.complex.subunit.outlineStyle.color,_style:a.complex.subunit.outlineStyle.style,_thickness:a.complex.subunit.outlineStyle.thickness},fillStyle:{_fillType:"LinearGradient",_gradientStyle:"Horizontal",_startColor:a.complex.subunit.gradient.startColor,_endColor:a.complex.subunit.gradient.endColor}}}})})}function c(a,b){_.each(a.JDesignerFormat.listOfReactions,function(a){var c=[];_.each(a.listOfReactants,function(b){c.push({_id:"SpeciesReference-"+a.id+b.id,_role:"substrate",_speciesGlyph:"sGlyph"+b.id,_speciesReference:b.id})}),_.each(a.listOfProducts,function(b){c.push({_id:"SpeciesReference-"+a.id+b.id,_role:"product",_speciesGlyph:"sGlyph"+b.id,_speciesReference:b.id})}),b.listOfLayouts.layout.listOfReactionGlyphs.reactionGlyph.push({_id:"rGlyph"+a.id,_reaction:a.id,listOfSpeciesReferenceGlyphs:{speciesReferenceGlyph:c}})})}var d={convert:function(d){var e=a.getTemplate();return b(d,e),c(d,e),e}};return d}]);